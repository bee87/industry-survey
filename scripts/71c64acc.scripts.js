"use strict";angular.module("surveyApp",["ngSanitize","ngRoute","ui.bootstrap.buttons"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/closing",{templateUrl:"views/closing.html",controller:"ClosingCtrl"}).when("/success",{controller:"SuccessCtrl",templateUrl:"views/success.html"}).otherwise({redirectTo:"/"})}]).run(["$rootScope","$location","industryData","$anchorScroll",function(a,b,c,d){a.$on("$routeChangeStart",function(a,d){"/"===d.$$route.originalPath||c.getSelected().length||b.path("/")}),a.$on("$routeChangeSuccess",function(){d()})}]),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.bind(h.toggleEvent,function(){a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("surveyApp").controller("MainCtrl",["$scope","industryData","$location",function(a,b,c){var d=4;a.data={industries:b.chunk(b.get(),4)},a.methods={getSelected:function(){return b.getSelected()},isDisabled:function(a){return!a.selected&&this.getSelected().length>=d},checkSelection:function(a){return this.getSelected().length>d?void(a.selected=!1):a.random?(a.selected=!1,this.selectRandom()):void 0},selectRandom:function(){var c=_.filter(_.flatten(a.data.industries),function(a){return!a.random&&!a.selected}),d=b.randomInt(0,c.length-1);c[d].selected=!0},submit:function(){this.getSelected().length&&c.path("/closing")}}}]),angular.module("surveyApp").factory("industryData",["$http",function(a){function b(a,b){if(!b)return a;for(var c=[],d=0;d<a.length;d+=b)c.push(a.slice(d,d+b));return c}function c(a,b){return Math.floor(Math.random()*(b-a+1))+a}function d(b){return a.post(e,b,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}var e="api/submit",f=[{slug:"clothing-apparel",title:"Clothing & Apparel"},{slug:"jewelry-accessories",title:"Jewelry & Accessories"},{slug:"bags-shoes",title:"Bags & Shoes"},{slug:"health-beauty",title:"Health & Beauty"},{slug:"food-drink",title:"Food & Drink"},{slug:"home-garden",title:"Home & Garden"},{slug:"electronics",title:"Electronics"},{slug:"random",title:"Random",random:!0}];return{get:function(){return f},getSelected:function(){return _.filter(this.get(),function(a){return!a.random&&a.selected})},chunk:b,randomInt:c,submitData:d}}]),angular.module("surveyApp").controller("ClosingCtrl",["$scope","industryData","$location",function(a,b,c){function d(){c.path("/success")}a.data={selected:b.getSelected(),email:void 0},a.data.count=a.data.selected.length,a.methods={submit:function(){if(a.data.email){var c={email:a.data.email,industries:_.pluck(a.data.selected,"slug")};return b.submitData(c).success(d).error(d)}}}}]),angular.module("surveyApp").controller("SuccessCtrl",["$scope","$timeout",function(a,b){a.isLoading=!0,b(function(){a.isLoading=!1},2e3)}]),angular.module("surveyApp").run(["$templateCache",function(a){a.put("views/closing.html",'<div class="closing-view base-view">\n  <div class="closing-content">\n    <h1>{{data.count > 1 ? \'Choices\' : \'Choice\'}} Submitted</h1>\n    <p>\n      Thanks for your {{data.count > 1 ? \'choices\' : \'choice\'}}. You chose\n      <span ng-repeat="item in data.selected"><span class="selected-shade">{{item.title}}{{$index === data.count - 1 ? \'.\' : ($index < data.count - 2 ? \',\' : \'\')}}</span>{{$index === data.count - 2 ? \' and \' : \'\'}}</span>Want more information? Enter your email address below.\n    </p>\n    <div class="form-frame">\n      <form ng-submit="methods.submit()">\n        <div class="input-group">\n          <input ng-model="data.email" type="email" required class="form-control" placeholder="Email Address">\n          <span class="input-group-btn">\n            <button type="submit" class="btn btn-lg email-submit-btn"><i class="email-icon"></i> Submit</button>\n          </span>\n        </div>\n      </form>\n    </div>\n  </div>\n</div>\n<div class="back-link-frame">\n  <a href="#/" class="back-link">\n    <i class="back-icon"></i> Change selected options\n  </a>\n</div>\n'),a.put("views/main.html",'<div class="choice-view base-view">\n  <h1>Industry Analyzer</h1>\n  <h2>Select Up To 4 Industries To Compare</h2>\n  <p class="note">(you can change these at any time)</p>\n  <div class="row" ng-repeat="group in data.industries">\n    <div ng-repeat="industry in group" class="col-sm-3">\n      <button\n        role="option"\n        aria-label="Select {{industry.title}}"\n        type="button"\n        btn-checkbox\n        ng-model="industry.selected"\n        ng-disabled="methods.isDisabled(industry)"\n        tabindex="{{methods.isDisabled(industry) ? -1 : ($parent.$index * 4) + $index + 1}}"\n        class="industry-choice"\n        ng-class="{disabled: methods.isDisabled(industry), wiggobble: industry.selected}"\n        ng-change="methods.checkSelection(industry)">\n        <div class="industry-icon icon-{{industry.slug}}"></div>\n        <p>{{industry.title}}</p>\n      </button>\n    </div>\n  </div>\n  <div class="btn-frame">\n    <button\n      type="button"\n      ng-click="methods.submit()"\n      ng-class="{disabled: !methods.getSelected().length}"\n      class="submit-btn btn btn-lg">\n      Submit Choices\n    </button>\n  </div>\n</div>\n'),a.put("views/success.html",'<div class="success-view base-view" ng-switch="isLoading">\n  <div class="loading-frame" ng-switch-when="true">\n    <h2>Finding the best commerce solution... Just for you</h2>\n    <div class="bubble-loader">\n      <div class="1"></div>\n      <div class="2"></div>\n      <div class="3"></div>\n      <div class="4"></div>\n      <div class="5"></div>\n    </div>\n  </div>\n  <div class="shop-frame bounce-in" ng-switch-when="false">\n    <h2>The best commerce solution for you is...</h2>\n    <div class="success-image-frame">\n      <a href="http://shopify.com" target="_blank">\n        <img alt="Shopify" src="images/shopify-icon.png">\n      </a>\n    </div>\n    <h1>Shopify</h1>\n  </div>\n</div>\n')}]);